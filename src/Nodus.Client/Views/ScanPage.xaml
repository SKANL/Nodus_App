<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:zxing="clr-namespace:ZXing.Net.Maui.Controls;assembly=ZXing.Net.Maui.Controls"
             xmlns:vm="clr-namespace:Nodus.Client.ViewModels"
             x:Class="Nodus.Client.Views.ScanPage"
             Title="Scanner"
             Shell.TabBarIsVisible="False">

    <Grid>
        <zxing:CameraBarcodeReaderView 
            x:Name="CameraView"
            IsDetecting="{Binding IsScanning}"
            BarcodesDetected="CameraBarcodeReaderView_BarcodesDetected"
            VerticalOptions="FillAndExpand" 
            HorizontalOptions="FillAndExpand" />

        <!-- Crosshair Overlay -->
        <Border Stroke="Lime" 
                StrokeThickness="3" 
                HeightRequest="250" 
                WidthRequest="250" 
                HorizontalOptions="Center" 
                VerticalOptions="Center" 
                BackgroundColor="Transparent">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="20" />
            </Border.StrokeShape>
        </Border>

        <Label Text="{Binding InstructionText}" 
               TextColor="White" 
               BackgroundColor="#80000000"
               Padding="10,5"
               HorizontalOptions="Center" 
               VerticalOptions="Start" 
               Margin="0,50,0,0" />
               
        <Button Text="Cancel"
                Command="{Binding CancelCommand}"
                VerticalOptions="End"
                Margin="20" />
    </Grid>
</ContentPage>
